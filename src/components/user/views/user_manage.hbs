<main class="main-content position-relative max-height-vh-100 h-100 mt-1 border-radius-lg ">
	<div class="container-fluid py-4">
		<div class="row">
			<div class="col-12 ">
				<div class="card mb-4">
					<div class="card-header pb-0">
						<h6>User table</h6>
					</div>
					<div class="card-body px-0 pt-0 pb-2">
						<div class="table-responsive p-0">
							<table class="table align-items-center mb-0">
								<thead>
									<tr>
										<th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
											Author
										</th>
										<th
											class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">
											Function
										</th>
										<th
											class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
											Employed
										</th>
										<th
											class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
											Detail
										</th>
										<th class="text-secondary opacity-7"></th>
									</tr>
								</thead>
								<tbody id="user-body">
								</tbody>
							</table>
						</div>
					</div>

				</div>
				<nav aria-label="Page navigation example">
					<ul class="pagination" style="display: flex; justify-content: right;" id="user-pagination">

					</ul>
				</nav>
			</div>
		</div>
		<div class="row d-flex flex-column align-items-center">

			{{!-- button add --}}
			<button class=" btn btn-primary button-add" data-bs-toggle="modal" data-bs-target='#add-user'
				onmousedown="addUser()">Add
				User
			</button>
			<script>
				function addUser() {
					document.getElementById("error").innerHTML = "";
				}
			</script>
		</div>

		<div id="error">
		</div>

		<!-- Modal add user -->
		<form action="/manage/add-user" method="post" enctype="multipart/form-data">
			<div class="modal fade" id='add-user' tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="exampleModalLabel">Add new user account</h5>
						</div>

						<div class="modal-body">
							<div class="row">
								<div class="col-3">
									<img src="/img/default-avtar.jpg" class="in-avatar rounded float-start" id="avatar"
										alt="avatar">
								</div>
								<div class="col-9">
									<b>Avatar:</b>
									<input type="file" class="form-control form-control-sm" id="input-avatar"
										name="avatar_url" accept=".jpg,.jpeg,.png">
								</div>
							</div>

							<b>Full name:</b> <span class="red-start">*</span>
							<div class="input-group input-group-sm mb-2">
								<input type="text" aria-label="First name" class="form-control" placeholder="First name"
									name="fname">
								<input type="text" aria-label="Last name" class="form-control" placeholder="Last name"
									name="lname">
							</div>

							<b>Username:</b> <span class="red-start">*</span>
							<div class="input-group input-group-sm mb-2">
								<span class="input-group-text" id="basic-addon1">@</span>
								<input type="text" class="form-control" placeholder="Username" aria-label="Username"
									aria-describedby="basic-addon1" name="username">
							</div>

							<b>Password:</b> <span class="red-start">*</span>
							<div class="mb-2">
								<div class="input-group input-group-sm mb-1">
									<input type="password" class="form-control" placeholder="Password" id="passwd"
										aria-label="Passwd" name="passwd">
									<span class="input-group-text">
										<i class="far fa-eye-slash" id="togglePassword-passwd"></i>
									</span>
								</div>
								<div class="input-group input-group-sm mb-1">
									<input type="password" class="form-control form-control-sm" id="confirm-passwd"
										placeholder="Confirm password" aria-label="Passwd" name="confirm_passwd">
									<span class="input-group-text">
										<i class="far fa-eye-slash" id="togglePassword-confirmPasswd"></i>
									</span>
								</div>
							</div>

							<b>Email:</b> <span class="red-start">*</span>
							<div class="input-group input-group-sm mb-2">
								<input type="text" class="form-control" placeholder="Username" aria-label="Username"
									name='mail_username'>
								<span class="input-group-text">@</span>
								<input type="text" class="form-control" name='mail_domain' placeholder="gmail.com"
									aria-label="Server">
							</div>

							<b>Address:</b>
							<input type="text" class="form-control form-control-sm mb-2" placeholder="Address"
								aria-label="addr" name="address">

							<b>Phone number:</b>
							<input type="tel" class="form-control form-control-sm" placeholder="Phone number"
								aria-label="phone-num" name="phone">

							<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancle
								</button>
								<input type="hidden" name="role" value="User">
								<button type="submit" class="btn btn-primary" data-bs-dismiss="modal">Submit
								</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</form>

	</div>

	<footer class="footer pt-3  "></footer>
</main>



{{!-- script show password --}}
<script>
	const togglePassword = document.querySelector("#togglePassword-passwd");
	const toggleConfirmPassword = document.querySelector("#togglePassword-confirmPasswd");
	const password = document.querySelector("#passwd");
	const confirmPassword = document.querySelector("#confirm-passwd");

	togglePassword.addEventListener("click", function () {

		// toggle the type attribute
		const type = password.getAttribute("type") === "password" ? "text" : "password";
		password.setAttribute("type", type);
		// toggle the eye icon
		this.classList.toggle('fa-eye');
		this.classList.toggle('fa-eye-slash');

	});
	toggleConfirmPassword.addEventListener("click", function () {

		// toggle the type attribute
		const type = confirmPassword.getAttribute("type") === "password" ? "text" : "password";
		confirmPassword.setAttribute("type", type);
		// toggle the eye icon
		this.classList.toggle('fa-eye');
		this.classList.toggle('fa-eye-slash');
	});
</script>


{{!-- load image from <file> to <img> --}}
	<script>
		document.getElementById('input-avatar').onchange = function (evt) {
			const tgt = evt.target || window.event.srcElement,
				files = tgt.files;

			// FileReader support
			if (FileReader && files && files.length) {
				const fr = new FileReader();
				fr.onload = function () {
					document.getElementById("avatar").src = fr.result;
				}
				fr.readAsDataURL(files[0]);
			}

			// Not supported
			else {
				// fallback -- perhaps submit the input to an iframe and temporarily store
				// them on the server until the user's session ends.
			}
		}
	</script>