<main class="main-content position-relative max-height-vh-100 h-100 mt-1 border-radius-lg ">
	<div class="container-fluid py-4">
		<div class="d-flex">
			<button type="submit" class="btn btn-primary align-bottom mx-2" data-bs-toggle="collapse"
				data-bs-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample"
				style="width: 200px; height: 50px;" onmousedown="">
				Add product
			</button>
			<form class="w-100" action="/product/add-product?_method=PUT" method="post">
				<div class="collapse w-100" id="collapseExample">
					<div class="card card-body ms-2 mb-2">
						<h3 class="card-title">
							<input type="text" class="form-control mb-2 p-2" value="{{name}}" name="name"
								placeholder="product's name" style="font-size: 23px; font-weight:bold;">
						</h3>
						<div class="input-group mb-2" style="width: 250px;">
							<input type="text" class="form-control"
								aria-label="Dollar amount (with dot and two decimal places)" value="{{price}}"
								name="price" placeholder="price" style="font-size: 23px; font-weight:bold;">
							<span class="input-group-text" style="font-size: 23px; font-weight:bold;">$</span>
						</div>
						<div class="mb-2 row">
							<div class="">
								<div id="add-img">
									<div id="product-img-{{@index}}-wrap" class="row mb-2">
										<div class="col">
											<img src="/img/default-avtar.jpg" class="in-avatar rounded float-start"
												id="product-img-{{@index}}-show" alt="avatar">

										</div>
										<div class="col-12 col-md-10">
											<b>Image {{@index}}:</b>
											<a id="product-img-{{@index}}-minus"
												onmousedown="removeImg('product-img-{{@index}}')">
												<i class="fa fa-minus-circle" aria-hidden="true"></i>
											</a>
											<input type="file" class="form-control" id="product-img-{{@index}}-input"
												name="img" accept=".jpg,.jpeg,.png"
												onchange="document.getElementById('product-img-{{@index}}-show').src = window.URL.createObjectURL(this.files[0])">
										</div>
									</div>
								</div>
								<a class="d-flex align-items-center" style="z-index: 2;" onmousedown="addImg()">
									<i class="fa fa-plus-square-o" aria-hidden="true" style="font-size: 35px;"></i>
								</a>

								<script>
									var number_add = 1;
									const add_img = document.getElementById('add-img');

									function addImg() {
										console.log("add img");
										var add_img_div = "<div id='product-img-" + number_add + "-wrap' class='row mb-2'> <div class='col'> <img src='/img/default-avtar.jpg' class='in-avatar rounded float-start'id='product-img-" + number_add + "-show' alt='avatar'> </div> <div class='col-12 col-md-10'> <b>Image " + number_add + ":</b>  <a id='product-img-" + number_add + "-minus'  onmousedown=\"removeImg('product-img-" + number_add + "')\"> <i class='fa fa-minus-circle' aria-hidden='true'></i>  </a> <input type='file' class='form-control' id=\"product-img-" + number_add + "-input\" name='img' accept='.jpg,.jpeg,.png' onchange='document.getElementById(\"product-img-" + number_add + "-show\").src = window.URL.createObjectURL(this.files[0])'>  </div>  </div >";
										add_img.innerHTML += add_img_div;

										number_add += 1;
										console.log("num:", number_add);
									}

									function removeImg(id) {
										console.log("remove", id)
										document.getElementById(id + '-wrap').remove();
										document.getElementById(id + '-show').remove();
										document.getElementById(id + '-minus').remove();
										document.getElementById(id + '-input').remove();
									}
								</script>
							</div>
							{{!-- <div class="col-9">
								<h3>
								</h3>


							</div> --}}
						</div>
						<div class="row">


							<div class="mb-3 text-sm col-md-6">
								<b>SKU: </b>
								<input type="text" class="form-control " value="{{brand}}" name="SKU">
							</div>
							<div class="mb-3 text-sm col-md-6">
								<b>Brand: </b>
								<input type="text" class="form-control " value="{{brand}}" name="brand">
							</div>
						</div>
						<div class="row mb-2">
							<div class="me-3 text-sm col-5 col-sm-4 col-lg-3">
								<b>Category: </b>
								<span class="red-start">*</span>
								<div class="ps-3 pe-2">
									<div class="row">
										<div class="form-check col-6">
											<input class="form-check-input" type="radio" name="category" id="category"
												value="bag">
											<label class="form-check-label" for="flexRadioDefault1">
												Bag
											</label>
										</div>
										<div class="form-check col-6">
											<input class="form-check-input" type="radio" name="category" id="category"
												value="clothing">
											<label class="form-check-label" for="flexRadioDefault1">
												Clothing
											</label>
										</div>
									</div>
									<div class="row">
										<div class="form-check col-6">
											<input class="form-check-input" type="radio" name="category" id="category"
												value="shoes">
											<label class="form-check-label" for="flexRadioDefault1">
												Shoes
											</label>
										</div>
										<div class="form-check col-6">
											<input class="form-check-input" type="radio" name="category" id="category"
												value="accessories">
											<label class="form-check-label" for="flexRadioDefault1">
												Accessories
											</label>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="text-sm mb-3">
							<b class="mb-1">Size: </b>
							<div class="d-flex">
								<div class="form-check me-2">
									<input class="form-check-input" type="checkbox" name="size" value="26"
										id="flexCheckDefault">
									<span style="margin-left: -5px;">26</span>
								</div>
								<div class="form-check me-2">
									<input class="form-check-input" type="checkbox" name="size" value="27"
										id="flexCheckDefault">
									<span style="margin-left: -5px;">27</span>
								</div>
								<div class="form-check me-2">
									<input class="form-check-input" type="checkbox" name="size" value="28"
										id="flexCheckDefault">
									<span style="margin-left: -5px;">28</span>
								</div>
								<div class="form-check me-2">
									<input class="form-check-input" type="checkbox" name="size" value="29"
										id="flexCheckDefault">
									<span style="margin-left: -5px;">29</span>
								</div>
								<div class="form-check me-2">
									<input class="form-check-input" type="checkbox" name="size" value="30"
										id="flexCheckDefault">
									<span style="margin-left: -5px;">30</span>
								</div>
								<div class="form-check me-2">
									<input class="form-check-input" type="checkbox" name="size" value="31"
										id="flexCheckDefault">
									<span style="margin-left: -5px;">31</span>
								</div>
								<div class="form-check me-2">
									<input class="form-check-input" type="checkbox" name="size" value="32"
										id="flexCheckDefault">
									<span style="margin-left: -5px;">32</span>
								</div>
								<div class="form-check me-2">
									<input class="form-check-input" type="checkbox" name="size" value="33"
										id="flexCheckDefault">
									<span style="margin-left: -5px;">33</span>
								</div>
								<div class="form-check me-2">
									<input class="form-check-input" type="checkbox" name="size" value="34"
										id="flexCheckDefault">
									<span style="margin-left: -5px;">34</span>
								</div>
								<div class="form-check me-2">
									<input class="form-check-input" type="checkbox" name="size" value="35"
										id="flexCheckDefault">
									<span style="margin-left: -5px;">35</span>
								</div>
							</div>

						</div>

						<div class="mb-2">
							<div class="d-flex mb-2">
								<b class="text-sm">Color:&nbsp;</b>

								<a class="d-flex align-items-center" style="z-index: 2;" onmousedown="addColor()">
									<i class="fa fa-plus-square-o" aria-hidden="true" style="font-size: 20px;"></i>
								</a>

							</div>

							<div class="mb-2">
								<div class="mb-2 d-flex flex-wrap" id="add-color">
									<div id="color-0-wrap" class="position-relative mx-1 mb-2">
										<input type="color" class="form-control-color" name="color" id="color-0">

										<a id="color-0-minus" onmousedown="removeColor('color-0')">
											<i class="fa fa-minus-circle position-absolute"
												style=" z-index: 1; right:-5px; top:-4px;" aria-hidden="true"></i>
										</a>
									</div>
								</div>
							</div>
							<script>
								var numberadd = 1;
								var div_add_color = document.getElementById('add-color');
								const add_div = "<div id='color-" + numberadd + "-wrap' class='position-relative mx-1 mb-2'> <input type='color' class='form-control-color' name='color' id=\"color-" + numberadd + "\"> <a id=\"color-" + numberadd + "-minus\"  onmousedown='removeColor(\"color-" + numberadd + "\")'> <i class='fa fa-minus-circle position-absolute' style=' z-index: 1; right:-5px; top:-4px;' aria-hidden='true'> </i > </a > </div >";

								function addColor() {
									const _id = 'color-' + numberadd;
									const _id_minus = _id + '-minus';
									console.log("add color");

									div_add_color.innerHTML += add_div;

									numberadd++;
								}

								function removeColor(id) {
									console.log("remove", id)
									document.getElementById(id).remove();
									document.getElementById(id + '-minus').remove();
									document.getElementById(id + '-wrap').remove();
								}
							</script>
						</div>
						<div class="mb-3 text-sm">
							<b>Description:</b>
							<textarea class="form-control form-control-sm mb-2" id="exampleFormControlTextarea1"
								rows="4"></textarea>
						</div>
						<div class="mb-3 text-sm">
							<b>Detail:</b>
							<textarea class="form-control form-control-sm mb-2" id="exampleFormControlTextarea1"
								rows="4"></textarea>
						</div>

						<div class="card-footer">
							<button type="reset" class="btn btn-secondary align-bottom me-2" data-bs-toggle="collapse"
								data-bs-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
								Cancle
							</button>
							<button type="submit" class="btn btn-primary align-bottom">
								Submit
							</button>
						</div>
					</div>
				</div>
			</form>
		</div>


		<div class="d-flex flex-wrap">
			{{#each products}}
			<div class="card mx-2 my-2" style="width: 18rem;">
				<div class="card-img">
					<img src="{{thumbnail}}" class="card-img-top" alt="thumbnail">
				</div>
				<div class="card-body">
					<h6 class="card-title">{{name}}</h6>
					<div class="card-text mb-3 text-sm">Price: <b>{{price}}$</b></div>
					<a href="/product/{{_id}}" class="btn btn-primary" style="z-index: 1;">Detail</a>
				</div>
			</div>
			{{/each}}

		</div>






		<!-- Modal add user -->
		<form action="/manage/add-user" method="post" id="add-user-form" enctype="multipart/form-data">
			<div class="modal fade" id='add-user' tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="exampleModalLabel">Add new admin account</h5>
						</div>

						<div class="modal-body">
							<div class="row">
								<div class="col-3">
									<img src="/img/default-avtar.jpg" class="in-avatar rounded float-start" id="avatar"
										alt="avatar">
								</div>
								<div class="col-9">
									<b>Avatar:</b>
									<input type="file" class="form-control form-control-sm" id="input-avatar"
										name="avatar_url" accept=".jpg,.jpeg,.png">
								</div>
							</div>

							<b>Full name:</b> <span class="red-start">*</span>
							<div class="input-group input-group-sm mb-2">
								<input type="text" aria-label="First name" class="form-control" placeholder="First name"
									name="fname">
								<input type="text" aria-label="Last name" class="form-control" placeholder="Last name"
									name="lname">
							</div>

							<b>Username:</b> <span class="red-start">*</span>
							<div class="input-group input-group-sm mb-2">
								<span class="input-group-text" id="basic-addon1">@</span>
								<input type="text" class="form-control" placeholder="Username" aria-label="Username"
									aria-describedby="basic-addon1" name="username">
							</div>

							<b>Password:</b> <span class="red-start">*</span>
							<div class="mb-2">
								<div class="input-group input-group-sm mb-1">
									<input type="password" class="form-control" placeholder="Password" id="passwd"
										aria-label="Passwd" name="passwd">
									<span class="input-group-text">
										<i class="far fa-eye-slash" id="togglePassword-passwd"></i>
									</span>
								</div>
								<div class="input-group input-group-sm mb-1">
									<input type="password" class="form-control form-control-sm" id="confirm-passwd"
										placeholder="Confirm password" aria-label="Passwd" name="confirm_passwd">
									<span class="input-group-text">
										<i class="far fa-eye-slash" id="togglePassword-confirmPasswd"></i>
									</span>
								</div>
							</div>

							<b>Email:</b> <span class="red-start">*</span>
							<div class="input-group input-group-sm mb-2">
								<input type="text" class="form-control" placeholder="Username" aria-label="Username"
									name='mail_username'>
								<span class="input-group-text">@</span>
								<input type="text" class="form-control" name='mail_domain' placeholder="gmail.com"
									aria-label="Server">
							</div>

							<b>Address:</b>
							<input type="text" class="form-control form-control-sm mb-2" placeholder="Address"
								aria-label="addr" name="address">

							<b>Phone number:</b>
							<input type="tel" class="form-control form-control-sm" placeholder="Phone number"
								aria-label="phone-num" name="phone">

							<div class="modal-footer">
								<button type="reset" id="cancle-add-btn" class="btn btn-secondary"
									data-bs-dismiss="modal">Cancle
								</button>
								<button type="submit" id="submit-add-btn" class="btn btn-primary"
									data-bs-dismiss="modal" name="role" value="Admin"
									onmousedown="clickSubmitBtn()">Submit
								</button>
								<script>
									function clickSubmitBtn() {
										const btn_submit = document.getElementById("submit-add-btn");
										const btn_cancle = document.getElementById("cancle-add-btn");
										const form = document.getElementById("add-user-form");

										btn_cancle.disabled = true;
										btn_submit.disabled = true;
										btn_submit.innerHTML = '<i class = "fa fa-spinner fa-spin"></i>&nbsp; Please wait...';

										form.submit();
									}
								</script>
							</div>
						</div>
					</div>
				</div>
			</div>
		</form>

	</div>

	<footer class="footer pt-3  "></footer>
</main>


<div class="fixed-plugin">
	<a class="fixed-plugin-button text-dark position-fixed px-3 py-2">
		<i class="fa fa-cog py-2"> </i>
	</a>
	<div class="card shadow-lg ">
		<div class="card-header pb-0 pt-3 ">
			<div class="float-start">
				<h5 class="mt-3 mb-0">Soft UI Configurator</h5>
				<p>See our dashboard options.</p>
			</div>
			<div class="float-end mt-4">
				<button class="btn btn-link text-dark p-0 fixed-plugin-close-button">
					<i class="fa fa-close"></i>
				</button>
			</div>
			<!-- End Toggle Button -->
		</div>
		<hr class="horizontal dark my-1">
		<div class="card-body pt-sm-3 pt-0">
			<!-- Sidebar Backgrounds -->
			<div>
				<h6 class="mb-0">Sidebar Colors</h6>
			</div>
			<a href="javascript:void(0)" class="switch-trigger background-color">
				<div class="badge-colors my-2 text-start">
					<span class="badge filter bg-gradient-primary active" data-color="primary"
						onclick="sidebarColor(this)"></span>
					<span class="badge filter bg-gradient-dark" data-color="dark" onclick="sidebarColor(this)"></span>
					<span class="badge filter bg-gradient-info" data-color="info" onclick="sidebarColor(this)"></span>
					<span class="badge filter bg-gradient-success" data-color="success"
						onclick="sidebarColor(this)"></span>
					<span class="badge filter bg-gradient-warning" data-color="warning"
						onclick="sidebarColor(this)"></span>
					<span class="badge filter bg-gradient-danger" data-color="danger"
						onclick="sidebarColor(this)"></span>
				</div>
			</a>
			<!-- Sidenav Type -->
			<div class="mt-3">
				<h6 class="mb-0">Sidenav Type</h6>
				<p class="text-sm">Choose between 2 different sidenav types.</p>
			</div>
			<div class="d-flex">
				<button class="btn bg-gradient-primary w-100 px-3 mb-2 active" data-class="bg-transparent"
					onclick="sidebarType(this)">Transparent
				</button>
				<button class="btn bg-gradient-primary w-100 px-3 mb-2 ms-2" data-class="bg-white"
					onclick="sidebarType(this)">White
				</button>
			</div>
			<p class="text-sm d-xl-none d-block mt-2">You can change the sidenav type just on desktop view.</p>
			<!-- Navbar Fixed -->
			<div class="mt-3">
				<h6 class="mb-0">Navbar Fixed</h6>
			</div>
			<div class="form-check form-switch ps-0">
				<input class="form-check-input mt-1 ms-auto" type="checkbox" id="navbarFixed"
					onclick="navbarFixed(this)">
			</div>
		</div>
	</div>
	<div role="alert" aria-live="assertive" aria-atomic="true" class="toast" data-bs-autohide="false">
		<div class="toast-header">
			<strong class="me-auto">Bootstrap</strong>
			<small>11 mins ago</small>
			<button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
		</div>
		<div class="toast-body">
			Hello, world! This is a toast message.
		</div>
	</div>
</div>

{{!-- load image from <file> to <img> --}}
	<script>
		document.getElementById('input-product-image').onchange = function (evt) {
			const tgt = evt.target || window.event.srcElement,
				files = tgt.files;

			// FileReader support
			if (FileReader && files && files.length) {
				const fr = new FileReader();
				fr.onload = function () {
					document.getElementById("product-thumbnail").src = fr.result;
				}
				fr.readAsDataURL(files[0]);
			}

			// Not supported
			else {
				// fallback -- perhaps submit the input to an iframe and temporarily store
				// them on the server until the user's session ends.
			}
		}
	</script>